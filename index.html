<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />


  <link rel="stylesheet" href="style.css" />

  <title>Work Day Scheduler</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>


  <link href="css/jquery-ui.min.css" rel="stylesheet" />
  <script src="js/jquery-ui.min.js"></script>

  <script src="lib/moment/moment.js"></script>

  <script src="//code.jquery.com/jquery.min.js"></script>
  <script src="savy.min.js"></script>


  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
    integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">


  <link rel="stylesheet" href="style.css" />
  <title>DailyPlanner</title>


</head>

<body onload="refresh()">
  <div id="wrapper">
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
    </div>

    <ul id="shMenu">
      <li>

        <a href="JavaScript:void(0)">Details</a>
        <ul>
          <li><a href="JavaScript:void(0)">Color Coding</a></li>
          <li><a href="JavaScript:void(0)">Instructions</a></li>
          <ul></ul>
      </li>
    </ul><br />

    <div id="accordion">
      <h4>Color Based on Time</h4>
      <p>
        To begin click on the text for each scheduled event ! Write a custom event and press save ! Refresh the page and
        your Work Day Scheduler will remain in tact. The <r>Red</r> coloring will identify the current time period for
        you to create an event based on the current
        time. Future times will be hightlighted in Blue. All other times should be highlighted in <g>Green</g>.
        (Click "Color Based on Time" to hide text).
      </p>
    </div><br />
  </div>

  <table class="table">
    <thead id="dailyPlanner">

      <!-- <tr>
        <th bgcolor="#90EE90">9 AM</th>
        <th bgcolor="#90EE90"> Event  - <p id="eventText"></p> <p id="eventDisplay"></p> <input type="text" id="eventStored"/>
        <button style="float: right;" onclick="save();">Save</button>
      </tr>-->


    </thead>
  </table>


  <script type="text/javascript">

    $(document).ready(function () {



      var storedItem = localStorage.getItem("storedItem");


      function refresh() {
        var storeRefresh = localStorage.getItem("storedItem");
        if (storeRefresh) {
          document.getElementById('eventStored').value = storeRefresh;
        }
        localStorage.setItem("storedItem", Item);
        document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }


      function init() {
        //     <tr>
        //   <th bgcolor="#90EE90">9 AM</th>
        //   <th bgcolor="#90EE90"> Event  - <p id="eventText"></p>  <input type="text" id="eventStored"/>
        //   <button style="float: right;" class='saveBtn'  onclick="save();">Save</button>
        // </tr>
        var hours = ["9 AM", "10 AM", "11 AM", "12 PM", "1 PM", "2 PM", "3 PM", "4 PM", "5 PM"]
        for (var i = 0; i < hours.length; i++) {
          var tr = $("<tr>")
          var th = $("<th>")
          th.attr("bgcolor", "#90eebf")
          th.append(hours[i])

          var p = $("<p>")
          p.attr("id", "eventText" + i)

          var input = $("<input>")
          input.attr("type", "text")
          input.attr("id", "eventStored" + i)
          input.attr("class", "auto-save")
          var button = $("<button>")
          // button.attr("style", "float: right;")
          button.attr("class", "saveBtn")
          button.text("Save")
          button.on("click", save)
          th.append("    Schedule Event : ", p, input, button)
          tr.append(th)
          $("#dailyPlanner").append(tr)
        }

      }
      init();


      $(".saveBtn").on("click", save)
      function save() {
        var Item = $("#eventStored0").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem0", Item);
        $("#eventStored0").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText0").val(localStorage.getItem("storedItem0"))

        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");

      }

      $(".saveBtn").on("click", save1)
      function save1() {
        var Item = $("#eventStored1").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem1", Item);
        $("#eventStored1").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText1").val(localStorage.getItem("storedItem1"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }

      $(".saveBtn").on("click", save2)
      function save2() {
        var Item = $("#eventStored2").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem2", Item);
        $("#eventStored2").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText2").val(localStorage.getItem("storedItem2"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }
      $(".saveBtn").on("click", save3)
      function save3() {
        var Item = $("#eventStored3").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem3", Item);
        $("#eventStored3").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText3").val(localStorage.getItem("storedItem3"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }
      $(".saveBtn").on("click", save4)
      function save4() {
        var Item = $("#eventStored4").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem4", Item);
        $("#eventStored4").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText4").val(localStorage.getItem("storedItem4"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }
      $(".saveBtn").on("click", save5)
      function save5() {
        var Item = $("#eventStored5").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem5", Item);
        $("#eventStored5").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText5").val(localStorage.getItem("storedItem5"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }
      $(".saveBtn").on("click", save6)
      function save6() {
        var Item = $("#eventStored6").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem6", Item);
        $("#eventStored6").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText6").val(localStorage.getItem("storedItem6"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }
      $(".saveBtn").on("click", save7)
      function save7() {
        var Item = $("#eventStored7").val()
        //document.getElementById("eventStored").value;
        localStorage.setItem("storedItem7", Item);
        $("#eventStored7").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
        $("#eventText7").val(localStorage.getItem("storedItem7"))
        //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      }



      $('.auto-save').savy('load');  //this is the Auto-save! all text will persist with this after reload. 



      // function save() {
      //   var Item = $("#eventStored0").val()  //document.getElementById("eventStored").value;
      //   localStorage.setItem("storedItem0", Item);
      //   $("#eventStored0").val(Item)      //document.getElementById("eventStored").innerHTML = Item;
      //   $("#eventText0").val(localStorage.getItem("storedItem0"))    //document.getElementById("eventText").innerHTML = localStorage.getItem("storedItem");
      // }




      $("#shMenu").menu({
        position: {
          my: "center top",
          at: "center top",
        },
      });

      $("#accordion").accordion({
        // Slide animation or not or length
        animate: 4000,
        // Starting tab
        active: 0,
        // Collapsible if same tab is clicked
        collapsible: true,
        // Event that triggers
        event: "click",
        // Height based on content (content) or largest (auto)
        heightStyle: "content"
      });

      $("r").css("color", "red");

      $("g").css("color", "green");





      currentTime = moment().hour();

      $("#eventStored0 .auto-save").val(localStorage.getItem("9"));
      $("#eventStored1 .auto-save").val(localStorage.getItem("10"));
      $("#eventStored2 .auto-save").val(localStorage.getItem("11"));
      $("#eventStored3 .auto-save").val(localStorage.getItem("12"));
      $("#eventStored4 .auto-save").val(localStorage.getItem("13"));
      $("#eventStored5 .auto-save").val(localStorage.getItem("14"));
      $("#eventStored6 .auto-save").val(localStorage.getItem("15"));
      $("#eventStored7 .auto-save").val(localStorage.getItem("16"));
      $("#eventStored8 .auto-save").val(localStorage.getItem("17"));

      let rowTime = [9, 10, 11, 12, 13, 14, 15, 16, 17];
      for (let i = 0; i < rowTime.length; i++) {
        console.log(rowTime[i]);

        if (currentTime < rowTime[i]) {
          console.log(currentTime);
          $("<tr>")
            .removeClass("present")
            .removeClass("past")
            .addClass("future")
        }
        if (currentTime < rowTtime[i]) {
          console.log(currentTime);
          $("<tr>")
            .removeClass("present")
            .removeClass("past")
            .addClass("future")
        }
        if (currentTime < rowTime[i]) {
          console.log(currentTime);
          $("<tr>")
            .removeClass("present")
            .removeClass("past")
            .addClass("future")
        }

      }

    });

  </script>
  </div>
</body>

</html>